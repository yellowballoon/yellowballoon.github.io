---
title: "Pub/Sub"
date: 2024-08-07 00:00:00 -0000
categories: wiki
author: ylj
tags: wiki Pub/Sub
---

# Pub/Sub 패턴

![Alt text](https://blog.kakaocdn.net/dn/Jlyx2/btrEhZb2q48/fqkIFEUYyI3K5kN7AhmNK1/img.jpg)

Pub/Sub (Publisher/Subscriber) 패턴은 소프트웨어 아키텍처 패턴 중 하나로, 발행자(Producer)와 구독자(Consumer) 간의 메시징을 비동기적으로 처리하는 방식입니다.

이 패턴은 메시지를 전송하는 시스템과 메시지를 수신하는 시스템 간의 의존성을 최소화하고, 메시지 전달의 확장성과 유연성을 제공합니다.

## Pub/Sub의 주요 개념

1. 발행자 (Publisher)
    - 메시지를 생성하고 특정 주제(Topic) 또는 채널(Channel)에 메시지를 발행하는 역할을 합니다. 발행자는 메시지를 누가 구독하는지 알 필요가 없습니다.
<br/>

2. 구독자 (Subscriber)
    - 관심 있는 주제 또는 채널을 구독하고, 해당 주제에 메시지가 발행되면 이를 수신하는 역할을 합니다. 구독자는 메시지를 누가 발행하는지 알 필요가 없습니다.
<br/>

3. 주제 (Topic)/채널 (Channel)
    - 메시지가 발행되고 구독되는 논리적인 경로입니다. 주제는 특정 주제나 범주를 나타내며, 발행자와 구독자는 이 주제를 통해 메시지를 교환합니다.
<br/>

4. 브로커 (Broker)
    - 메시지 브로커는 발행자로부터 메시지를 받아서 해당 주제를 구독한 모든 구독자에게 메시지를 전달하는 중간자 역할을 합니다. 대표적인 메시지 브로커로는 RabbitMQ, Apache Kafka, Redis Pub/Sub 등이 있습니다.
<br/>

## 동작 방식

1. 발행자는 특정 주제에 메시지를 발행합니다.
<br/>
2. 메시지 브로커는 이 메시지를 받아 해당 주제를 구독한 모든 구독자에게 메시지를 전달합니다.
<br/>
3. 구독자는 자신이 구독한 주제에 새로운 메시지가 도착하면 이를 수신하고 처리합니다.

## Pub/Sub의 장점

1. 비동기 통신
    - 발행자와 구독자가 동시에 존재할 필요가 없으며, 메시지 브로커가 메시지를 중개하므로 비동기적으로 메시지를 주고받을 수 있습니다.
<br/>

2. 확장성
    - 다수의 발행자와 구독자를 지원할 수 있으며, 주제를 통해 메시지가 전달되므로 새로운 구독자를 추가해도 발행자의 코드 수정이 필요 없습니다.
<br/>

3. 유연성
    - 시스템 간의 강한 결합을 피할 수 있어, 시스템 구성 요소를 독립적으로 개발하고 배포할 수 있습니다.
<br/>

4. 로드 밸런싱
    - 메시지 브로커는 메시지를 여러 구독자에게 분배할 수 있어, 시스템의 부하를 균등하게 분산시킬 수 있습니다.
<br/>

## Pub/Sub의 단점

1. 복잡성 증가
    - Pub/Sub 시스템을 구축하고 운영하기 위해서는 메시지 브로커 설정, 모니터링, 유지 보수 등의 추가적인 복잡성이 발생합니다.
<br/>

2. 메시지 전달 보장
    - 일부 메시지 브로커는 메시지 전달을 완벽하게 보장하지 않을 수 있으며, 메시지 손실이나 중복 전송 문제가 발생할 수 있습니다.
<br/>

3. 지연 시간
    - 메시지가 브로커를 통해 전달되므로, 네트워크 지연이나 브로커의 성능 문제로 인해 메시지 전달에 지연이 발생할 수 있습니다.
<br/>

4. 에러 처리의 복잡성
    - 메시지 처리 실패 시 재시도 로직, 메시지 순서 보장, 중복 메시지 처리 등의 에러 처리 로직이 복잡할 수 있습니다.
<br/>

## Pub/Sub의 사용 사례

1. 실시간 알림 시스템
    - 다양한 이벤트(예: 사용자 가입, 주문 발생 등)를 발행하고, 이를 구독한 시스템이 실시간으로 알림을 보내거나 처리를 수행할 수 있습니다.
<br/>

2. 로그 수집 및 분석
    - 애플리케이션에서 발생하는 로그를 특정 주제에 발행하고, 이를 구독한 로그 수집기가 로그를 수집하여 분석 시스템에 전달합니다.
<br/>

3. 채팅 애플리케이션
    - 사용자가 보낸 메시지를 특정 채널에 발행하고, 해당 채널을 구독한 다른 사용자가 메시지를 실시간으로 수신할 수 있습니다.
<br/>

4. 이벤트 드리븐 아키텍처
    - 시스템 간의 이벤트를 주제로 발행하고 구독하여, 시스템 간의 의존성을 최소화하면서 이벤트 기반의 비동기 통신을 구현할 수 있습니다.
<br/>

## 대표적인 메시지 브로커

1. RabbitMQ
    - AMQP(Advanced Message Queuing Protocol)를 지원하는 메시지 브로커로, 다양한 메시징 패턴을 지원합니다.
<br/>

2. Apache Kafka
    - 대용량 데이터 스트리밍을 처리하기 위한 분산 메시징 시스템으로, 높은 처리량과 내구성을 제공합니다.
<br/>

3. Redis Pub/Sub
    - Redis의 Pub/Sub 기능을 이용하여 간단한 메시지 브로커 역할을 수행할 수 있습니다.
<br/>

4. Redis Pub/Sub
    - Google Cloud Platform에서 제공하는 완전 관리형 메시징 서비스로, 글로벌 확장성과 높은 가용성을 제공합니다.
<br/>