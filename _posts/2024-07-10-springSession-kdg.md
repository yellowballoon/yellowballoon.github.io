---
title: "Spring Session"
date: 2024-05-22 13:14:00 -0000
categories: wiki
author: kdg1986
tags: wiki spring session
---

Spring Session

스프링에서 세션을 관리하는 방법을 정리

# Session

HTTP 프로토콜은 기본적으로 Stateless 프로토콜이므로 각 요청을 독립적으로 처리함.

애플리케이션 에서는 클라이언트를 식별 해야하는 용도로 HTTP 세션을 사용한다.

### 웹서버

웹 애플리캐이션이 동작하도록 지원하는 목적을 가진 미들웨어 이다.

클라이언트의 요청이 들어오면 고유한 세션ID를 할당하고 쿠키를 사용하여 헤더에 포함하여 응답하고

이후 쿠키를 주고받으며 클라이언트를 식별하여 상태정보를 관리한다.

별도의 설정이 없다면 "인메모리" 설정으로 관리한다.

Spring Boot는 기본적으로 내장된 ( Tomcat, Jetty, Undertow ) 가 있다.

### 인메모리 세션 문제
    - 서버의 메모리에 저장이 되므로 장애시 세션 복구가 어렵다.
    - 해당 서버의 메모리에 저장되므로 단일 서버가 아니라면 문제가 될 수 있음. (세션 파편화)
    - WAS 세션 클러스터링이 있지만 복잡한 설정, 성능저하, 데이터 일관성 문제등이 있음.


# Spring Session

서로 다른 물리서버의 인메모리 세션의 문제를 해결하려면 일종의 공유 세션 저장소를 구현 해야 하는데

Spring Session은 애플리케이션과 세션 관리 사이에 추상화 계층을 제공해준다.

이를 통해 관계형 데이터베이스, NoSQL 데이터베이스 등과 같은 다양한 영구 저장소에 저장할 수 있다.

    - Spring Session을 사용하면 영구 저장소에 관계없이 동일한 API를 사용하여 세션을 관리할 수 있다.
    - 애플리케이션 코드를 변경하지 않고도 저장소간 전환이 더 쉬워진다.
    - Spring Session은 다양한 세션관련 기능을 제공한다.
    - 별도의 저장소로 관리하여 장애시 대응하기 쉬워진다.


